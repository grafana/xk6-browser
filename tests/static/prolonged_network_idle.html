<html>

<head></head>

<body>
    <div id="prolongNetworkIdleLoad">Waiting...</div>
    <div id="serverMsg">Waiting...</div>

    <script>
        var prolongNetworkIdleLoadOutput = document.getElementById("prolongNetworkIdleLoad");

        var p = prolongNetworkIdleLoad();
        p.then(() => {
            prolongNetworkIdleLoadOutput.innerText += ' - for loop complete';
        })

        async function prolongNetworkIdleLoad() {
            for (var i = 0; i < 4; i++) {
                await fetch('/ping')
                    .then(response => response.text())
                    .then((data) => {
                        prolongNetworkIdleLoadOutput.innerText = 'Waiting... ' + data;
                    });
            }
        }
    </script>
    <script src="/ping.js" async></script>
</body>

</html>